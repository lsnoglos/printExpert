<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PrintExpert üñ∂</title>
  <link rel="stylesheet" href="css/style.css" />
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css"
    rel="stylesheet"/>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js">
  </script>
</head>

<body>
  <header><h1>PrintExpert üñ∂</h1></header>

  <main>
    <form id="wizardForm">

      <div class="step active" data-step="1">
        <h2>Paso 1 / 4: Cargar y recortar imagen</h2>
        <div class="form-group">
          <label>Imagen de entrada:</label>
          <input type="file" id="imageInput" accept="image/*" />
        </div>
        <div class="form-group">
          <label>Vista previa (recorta con el rat√≥n):</label>
          <div class="crop-container">
            <img id="imgPreview" style="max-width:100%; display:block;" />
          </div>
          <button type="button" id="cropBtn">Recortar selecci√≥n</button>
        </div>
      </div>

      <div class="step" data-step="2">
        <h2>Paso 2 / 4: Formato, m√°rgenes y entrelace</h2>
        <div class="form-group">
          <label>Formato de papel:</label>
          <select id="sheetSize">
            <option value="letter">Carta ‚Äì 216√ó279 mm</option>
            <option value="A4">A4 ‚Äì 210√ó297 mm</option>
            <option value="tabloid">Tabloide ‚Äì 279√ó432 mm</option>
          </select>
        </div>

        <fieldset>
          <legend>M√°rgenes (cm)</legend>
          <div class="form-group inline-checks compact-checks">
            <label class="inline-check"><input type="checkbox" id="linkMargins"/> Todos iguales</label>
          </div>
          <div class="row-fields">
            <label>Superior <input type="number" id="marginTop" value="0" step="0.1" min="0"/></label>
            <label>Izquierdo <input type="number" id="marginLeft" value="0" step="0.1" min="0"/></label>
            <label>Derecho <input type="number" id="marginRight" value="0" step="0.1" min="0"/></label>
            <label>Inferior <input type="number" id="marginBottom" value="0" step="0.1" min="0"/></label>
          </div>
          <div class="form-group">
            <button type="button" id="resetMarginsBtn">Sin m√°rgenes</button>
          </div>
        </fieldset>

        <fieldset>
          <legend>Entrelace / solapado (cm)</legend>
          <div class="row-fields">
            <label>Ancho <input type="number" id="overlapWidth" value="1" step="0.1" min="0"/></label>
            <label>Alto <input type="number" id="overlapHeight" value="1" step="0.1" min="0"/></label>
          </div>
          <div class="form-group inline-checks compact-checks">
            <label class="inline-check"><input type="checkbox" id="blankOverlap"/> Reservar entrelace en blanco (sin fragmento de imagen duplicado)</label>
          </div>
        </fieldset>
      </div>

      <div class="step" data-step="3">
        <h2>Paso 3 / 4: Dimensiones por hojas y vista previa</h2>

        <div class="form-group">
          <label>Orientaci√≥n de hoja:</label>
          <select id="orientation">
            <option value="portrait">Vertical</option>
            <option value="landscape">Horizontal</option>
          </select>
        </div>

        <div class="form-group">
          <div class="inc-controls">
            <button type="button" class="inc" data-target="pagesX" data-op="-">‚àí</button>
            <input type="number" id="pagesX" value="1" min="1"/>
            <label for="pagesX">Hojas horiz.</label>
            <button type="button" class="inc" data-target="pagesX" data-op="+">+</button>
          </div>
          <div class="inc-controls">
            <button type="button" class="inc" data-target="pagesY" data-op="-">‚àí</button>
            <input type="number" id="pagesY" value="1" min="1"/>
            <label for="pagesY">Hojas vert.</label>
            <button type="button" class="inc" data-target="pagesY" data-op="+">+</button>
          </div>
        </div>

        <div class="form-group">
          <label>Resultado:</label>
          <div id="resultLabel" class="result-box">‚Äî</div>
        </div>

        <div class="form-group inline-checks compact-checks">
          <label class="inline-check"><input type="checkbox" id="keepAspect" checked/> Mantener proporci√≥n</label>
        </div>

        <div class="form-group" id="alignmentGroup">
          <label id="imageAlignLabel" for="imageAlign">Alineaci√≥n de imagen:</label>
          <select id="imageAlign">
            <option value="top">Arriba</option>
            <option value="bottom">Abajo</option>
            <option value="center" selected>Centro</option>
            <option value="right">Derecha</option>
            <option value="left">Izquierda</option>
          </select>
        </div>

        <canvas id="previewCanvas" width="400" height="0"></canvas>
      </div>

      <div class="step" data-step="4">
        <h2>Paso 4 / 4: Guardar p√≥ster</h2>
        <div class="form-group inline-checks compact-checks">
          <label class="inline-check"><input type="checkbox" id="showGuides" checked/> Mostrar l√≠neas gu√≠a (entrelace: verde / m√°rgenes: rojo)</label>
        </div>
        <div class="form-group inline-checks compact-checks">
          <label class="inline-check"><input type="checkbox" id="showOverlap" checked/> Mostrar zonas de entrelace en la vista previa/PDF</label>
        </div>
        <div class="form-group inline-checks compact-checks">
          <label class="inline-check"><input type="checkbox" id="openPdf"/> Abrir PDF tras generar</label>
        </div>
      </div>

      <div class="wizard-nav">
        <button type="button" id="prevBtn">Atr√°s</button>
        <button type="button" id="nextBtn">Siguiente</button>
      </div>
    </form>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
